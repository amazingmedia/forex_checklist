<!DOCTYPE html>
<html lang="my">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Forex Entry Checklist</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- FontAwesome for Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Google Fonts for Burmese -->
    <link href="https://fonts.googleapis.com/css2?family=Padauk:wght@400;700&display=swap" rel="stylesheet">
    
    <style>
        body {
            font-family: 'Padauk', sans-serif;
            background-color: #111827; /* Dark Background */
            color: #e5e7eb;
        }
        
        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #1f2937; 
        }
        ::-webkit-scrollbar-thumb {
            background: #4b5563; 
            border-radius: 4px;
        }

        /* LED Light Effects */
        .led-light {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            transition: all 0.3s ease;
            box-shadow: inset 0 0 5px rgba(0,0,0,0.5);
        }

        .led-red {
            background-color: #ef4444;
            box-shadow: 0 0 10px #ef4444, inset 0 0 5px rgba(0,0,0,0.5);
            opacity: 0.8;
        }
        
        .led-green {
            background-color: #22c55e;
            box-shadow: 0 0 15px #22c55e, 0 0 30px #22c55e;
            transform: scale(1.1);
        }

        .card-glass {
            background: rgba(31, 41, 55, 0.7);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(75, 85, 99, 0.4);
        }
        
        .delete-btn {
            opacity: 0;
            transition: opacity 0.2s;
        }
        
        .checklist-item:hover .delete-btn {
            opacity: 1;
        }

        /* FAB Animation */
        .fab-btn {
            transition: transform 0.2s;
        }
        .fab-btn:active {
            transform: scale(0.95);
        }
    </style>
</head>
<body class="min-h-screen flex items-center justify-center p-4 relative">

    <div class="w-full max-w-md card-glass rounded-2xl shadow-2xl overflow-hidden relative flex flex-col h-[80vh] md:h-auto">
        
        <!-- Header Section -->
        <div class="bg-gray-800 p-6 flex justify-between items-center border-b border-gray-700">
            <div>
                <h1 class="text-xl font-bold text-white tracking-wide">
                    <i class="fa-solid fa-chart-line text-blue-400 mr-2"></i>TRADING PLAN
                </h1>
                <p class="text-xs text-gray-400 mt-1">Entry မဝင်ခင် သေချာစစ်ဆေးပါ</p>
            </div>
            
            <div class="flex gap-4 items-center">
                <!-- Mindset Button (New) -->
                <button onclick="openMindsetModal()" class="text-pink-400 hover:text-pink-300 transition p-2 bg-pink-500/10 rounded-full hover:bg-pink-500/20" title="Trading Psychology">
                    <i class="fa-solid fa-brain text-lg"></i>
                </button>

                <!-- Score Counter -->
                <div class="flex flex-col items-center">
                    <span class="text-xs text-gray-400 uppercase font-semibold">Ready</span>
                    <div class="relative">
                        <span id="completedCount" class="text-4xl font-bold text-green-500 drop-shadow-[0_0_10px_rgba(34,197,94,0.8)]">0</span>
                        <span class="text-gray-500 text-lg">/</span>
                        <span id="totalCount" class="text-gray-500 text-lg">0</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Progress Bar -->
        <div class="w-full bg-gray-700 h-1.5 shrink-0">
            <div id="progressBar" class="bg-blue-500 h-1.5 transition-all duration-500 shadow-[0_0_10px_#3b82f6]" style="width: 0%"></div>
        </div>

        <!-- Checklist Container -->
        <div id="checklistContainer" class="p-4 flex-1 overflow-y-auto space-y-3 pb-20">
            <!-- Items will be injected here via JS -->
        </div>

        <!-- Empty State (Hidden by default) -->
        <div id="emptyState" class="hidden absolute inset-0 top-32 flex flex-col items-center justify-center text-center pointer-events-none">
            <i class="fa-solid fa-clipboard-list text-gray-600 text-4xl mb-3"></i>
            <p class="text-gray-500 text-sm">Plan မရှိသေးပါ။ <br>ညာဘက်အောက်က (+) ကိုနှိပ်ပြီး ထပ်ထည့်ပါ။</p>
        </div>

        <!-- Bottom Controls Container -->
        
        <!-- Reset Button (Moved to bottom left) -->
        <button onclick="openResetModal()" 
            class="absolute bottom-4 left-4 text-gray-400 hover:text-white text-xs flex items-center gap-2 px-3 py-2 rounded-lg hover:bg-gray-700/50 transition z-10 border border-transparent hover:border-gray-600">
            <i class="fa-solid fa-rotate-right"></i> Reset Checklist
        </button>

        <!-- Floating Action Button (Bottom right) -->
        <button onclick="openAddModal()" 
            class="fab-btn absolute bottom-4 right-4 bg-blue-600 hover:bg-blue-500 text-white w-10 h-10 rounded-full shadow-[0_4px_15px_rgba(37,99,235,0.4)] flex items-center justify-center text-lg z-10">
            <i class="fa-solid fa-plus"></i>
        </button>

    </div>

    <!-- Add Item Modal -->
    <div id="addModal" class="fixed inset-0 bg-black bg-opacity-80 hidden items-center justify-center z-50 p-4 backdrop-blur-sm">
        <div class="bg-gray-800 p-6 rounded-2xl w-full max-w-sm border border-gray-700 shadow-2xl transform transition-all scale-100">
            <h3 class="text-lg font-bold mb-4 text-white flex items-center gap-2">
                <i class="fa-solid fa-list-check text-blue-400"></i> အချက်အလက်သစ်ထည့်ရန်
            </h3>
            <input type="text" id="newItemInput" placeholder="ဥပမာ: RSI < 30 ဖြစ်လား?" 
                class="w-full bg-gray-700 text-white p-3 rounded-lg border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500 mb-4 placeholder-gray-500">
            
            <div class="flex justify-end gap-3">
                <button onclick="closeAddModal()" class="px-4 py-2 rounded-lg text-gray-400 hover:bg-gray-700 hover:text-white transition">ပိတ်မည်</button>
                <button onclick="addItem()" class="bg-blue-600 hover:bg-blue-500 px-6 py-2 rounded-lg text-white transition shadow-lg font-medium">ထည့်မည်</button>
            </div>
        </div>
    </div>

    <!-- Edit Modal -->
    <div id="editModal" class="fixed inset-0 bg-black bg-opacity-80 hidden items-center justify-center z-50 p-4 backdrop-blur-sm">
        <div class="bg-gray-800 p-6 rounded-2xl w-full max-w-sm border border-gray-700 shadow-2xl">
            <h3 class="text-lg font-bold mb-4 text-white">ပြင်ဆင်ရန်</h3>
            <input type="text" id="editInput" class="w-full bg-gray-700 text-white p-3 rounded-lg border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500 mb-4">
            <div class="flex justify-end gap-3">
                <button onclick="closeEditModal()" class="px-4 py-2 rounded-lg text-gray-400 hover:bg-gray-700 hover:text-white transition">မလုပ်တော့ပါ</button>
                <button onclick="saveEdit()" class="bg-green-600 hover:bg-green-500 px-4 py-2 rounded-lg text-white transition shadow-[0_0_10px_rgba(22,163,74,0.5)]">သိမ်းမည်</button>
            </div>
        </div>
    </div>

    <!-- Reset Confirmation Modal -->
    <div id="resetModal" class="fixed inset-0 bg-black bg-opacity-80 hidden items-center justify-center z-50 p-4 backdrop-blur-sm">
        <div class="bg-gray-800 p-6 rounded-2xl w-full max-w-sm border border-gray-700 shadow-2xl text-center">
            <div class="w-12 h-12 bg-gray-700 rounded-full flex items-center justify-center mx-auto mb-4">
                <i class="fa-solid fa-rotate-right text-yellow-400 text-xl"></i>
            </div>
            <h3 class="text-xl font-bold mb-2 text-white">Reset လုပ်မှာလား?</h3>
            <p class="text-gray-400 mb-6 text-sm">အမှန်ခြစ်ထားသမျှ အားလုံးပျောက်သွားပါမယ်။</p>
            
            <div class="flex justify-center gap-3">
                <button onclick="closeResetModal()" class="px-4 py-2 rounded-lg text-gray-300 hover:bg-gray-700 transition w-full">မလုပ်ပါ</button>
                <button onclick="confirmReset()" class="bg-yellow-600 hover:bg-yellow-500 text-white px-4 py-2 rounded-lg transition shadow-lg w-full font-medium">Reset လုပ်မည်</button>
            </div>
        </div>
    </div>

    <!-- Delete Confirmation Modal -->
    <div id="deleteModal" class="fixed inset-0 bg-black bg-opacity-80 hidden items-center justify-center z-50 p-4 backdrop-blur-sm">
        <div class="bg-gray-800 p-6 rounded-2xl w-full max-w-sm border border-gray-700 shadow-2xl text-center">
             <div class="w-12 h-12 bg-red-900/30 rounded-full flex items-center justify-center mx-auto mb-4">
                <i class="fa-solid fa-trash text-red-500 text-xl"></i>
            </div>
            <h3 class="text-xl font-bold mb-2 text-white">ဖျက်မှာသေချာလား?</h3>
            <p class="text-gray-400 mb-6 text-sm">ဒီအချက်အလက်ကို Trading Plan ထဲကနေ အပြီးဖျက်ပါမယ်။</p>
            
            <div class="flex justify-center gap-3">
                <button onclick="closeDeleteModal()" class="px-4 py-2 rounded-lg text-gray-300 hover:bg-gray-700 transition w-full">မဖျက်ပါ</button>
                <button onclick="confirmDelete()" class="bg-red-600 hover:bg-red-500 text-white px-4 py-2 rounded-lg transition shadow-lg w-full font-medium">ဖျက်မည်</button>
            </div>
        </div>
    </div>

    <!-- Mindset Modal (New) -->
    <div id="mindsetModal" class="fixed inset-0 bg-black bg-opacity-80 hidden items-center justify-center z-50 p-4 backdrop-blur-sm">
        <div class="bg-gray-800 p-6 rounded-2xl w-full max-w-sm border border-gray-700 shadow-2xl relative">
            <button onclick="closeMindsetModal()" class="absolute top-4 right-4 text-gray-400 hover:text-white">
                <i class="fa-solid fa-xmark text-xl"></i>
            </button>
            
            <h3 class="text-xl font-bold mb-6 text-pink-400 flex items-center gap-2">
                <i class="fa-solid fa-brain"></i> Mindset Rules
            </h3>
            
            <ul class="space-y-4 text-gray-300 text-sm leading-relaxed">
                <li class="flex gap-3">
                    <i class="fa-solid fa-circle-check text-green-500 mt-1 shrink-0 text-xs"></i>
                    <span>အကြောက်တရား (Fear)၊ လောဘ (Greed)၊ လက်စားချေလိုစိတ် (Revenge Trading) တို့ဖြင့် ဘယ်တော့မှ Trade မလုပ်။</span>
                </li>
                <li class="flex gap-3">
                    <i class="fa-solid fa-circle-check text-green-500 mt-1 shrink-0 text-xs"></i>
                    <span>နိုင်နေသည်ဖြစ်စေ၊ ရှုံးနေသည်ဖြစ်စေ Trading Plan ကိုသာ တိကျစွာ လိုက်နာမည်။</span>
                </li>
                <li class="flex gap-3">
                    <i class="fa-solid fa-circle-check text-green-500 mt-1 shrink-0 text-xs"></i>
                    <span>အရှုံးသည် Trading ၏ အစိတ်အပိုင်းတစ်ခုဖြစ်ကြောင်း အမြဲသတိရပြီး လက်ခံနိုင်အောင် ကြိုးစားမည်။</span>
                </li>
            </ul>

            <button onclick="closeMindsetModal()" class="mt-8 w-full bg-gray-700 hover:bg-gray-600 text-white py-2 rounded-lg transition">
                နားလည်ပါပြီ
            </button>
        </div>
    </div>

    <script>
        // Initial Data
        const defaultItems = [
            { id: 1, text: "Pattern ပေါ်နေပြီလား?", checked: false },
            { id: 2, text: "BOS (Break of Structure) ဖြစ်လား?", checked: false },
            { id: 3, text: "HTF Trend နဲ့ တူညီလား?", checked: false },
            { id: 4, text: "Risk Reward 1:2 အနည်းဆုံးရလား?", checked: false },
            { id: 5, text: "News ရှိမရှိ စစ်ပြီးပြီလား?", checked: false }
        ];

        let checklist = JSON.parse(localStorage.getItem('forexChecklist')) || defaultItems;
        let editingId = null;
        let deletingId = null;

        // Render the list
        function renderChecklist() {
            const container = document.getElementById('checklistContainer');
            const emptyState = document.getElementById('emptyState');
            
            container.innerHTML = '';
            
            if (checklist.length === 0) {
                emptyState.classList.remove('hidden');
            } else {
                emptyState.classList.add('hidden');
                
                checklist.forEach(item => {
                    const div = document.createElement('div');
                    div.className = `checklist-item flex items-center justify-between bg-gray-900/50 p-4 rounded-xl border ${item.checked ? 'border-green-500/30' : 'border-gray-700'} transition-all hover:bg-gray-800`;
                    
                    div.innerHTML = `
                        <div class="flex items-center gap-4 flex-1 cursor-pointer group" onclick="toggleCheck(${item.id})">
                            <!-- LED Light Button -->
                            <div class="relative">
                                <div class="led-light ${item.checked ? 'led-green' : 'led-red'}"></div>
                            </div>
                            
                            <!-- Text -->
                            <span class="${item.checked ? 'text-green-400 font-medium' : 'text-gray-300'} text-lg transition-colors select-none group-hover:text-white">
                                ${item.text}
                            </span>
                        </div>

                        <!-- Actions -->
                        <div class="flex items-center gap-2 ml-2">
                            <button onclick="openEditModal(${item.id})" class="text-gray-600 hover:text-blue-400 p-2 transition">
                                <i class="fa-solid fa-pen text-sm"></i>
                            </button>
                            <button onclick="openDeleteModal(${item.id})" class="delete-btn text-gray-600 hover:text-red-500 p-2 transition">
                                <i class="fa-solid fa-trash text-sm"></i>
                            </button>
                        </div>
                    `;
                    container.appendChild(div);
                });
            }

            updateStats();
            saveData();
        }

        // Add Item Modal Logic
        function openAddModal() {
            document.getElementById('addModal').classList.remove('hidden');
            document.getElementById('addModal').classList.add('flex');
            setTimeout(() => document.getElementById('newItemInput').focus(), 100);
        }

        function closeAddModal() {
            document.getElementById('addModal').classList.add('hidden');
            document.getElementById('addModal').classList.remove('flex');
            document.getElementById('newItemInput').value = '';
        }

        function addItem() {
            const input = document.getElementById('newItemInput');
            const text = input.value.trim();
            
            if (text) {
                const newItem = {
                    id: Date.now(),
                    text: text,
                    checked: false
                };
                checklist.push(newItem);
                renderChecklist();
                closeAddModal();
                
                // Scroll to bottom
                const container = document.getElementById('checklistContainer');
                setTimeout(() => {
                    container.scrollTop = container.scrollHeight;
                }, 100);
            }
        }

        // Toggle Check/Uncheck
        function toggleCheck(id) {
            checklist = checklist.map(item => {
                if (item.id === id) {
                    return { ...item, checked: !item.checked };
                }
                return item;
            });
            renderChecklist();
        }

        // Delete Modal Logic
        function openDeleteModal(id) {
            deletingId = id;
            document.getElementById('deleteModal').classList.remove('hidden');
            document.getElementById('deleteModal').classList.add('flex');
        }

        function closeDeleteModal() {
            document.getElementById('deleteModal').classList.add('hidden');
            document.getElementById('deleteModal').classList.remove('flex');
            deletingId = null;
        }

        function confirmDelete() {
            if (deletingId) {
                checklist = checklist.filter(item => item.id !== deletingId);
                renderChecklist();
                closeDeleteModal();
            }
        }

        // Edit Modal Logic
        function openEditModal(id) {
            const item = checklist.find(i => i.id === id);
            if (item) {
                editingId = id;
                document.getElementById('editInput').value = item.text;
                document.getElementById('editModal').classList.remove('hidden');
                document.getElementById('editModal').classList.add('flex');
                document.getElementById('editInput').focus();
            }
        }

        function closeEditModal() {
            document.getElementById('editModal').classList.add('hidden');
            document.getElementById('editModal').classList.remove('flex');
            editingId = null;
        }

        function saveEdit() {
            const newText = document.getElementById('editInput').value.trim();
            if (newText && editingId) {
                checklist = checklist.map(item => {
                    if (item.id === editingId) {
                        return { ...item, text: newText };
                    }
                    return item;
                });
                renderChecklist();
                closeEditModal();
            }
        }

        // Reset Modal Logic
        function openResetModal() {
            document.getElementById('resetModal').classList.remove('hidden');
            document.getElementById('resetModal').classList.add('flex');
        }

        function closeResetModal() {
            document.getElementById('resetModal').classList.add('hidden');
            document.getElementById('resetModal').classList.remove('flex');
        }

        function confirmReset() {
            checklist = checklist.map(item => ({ ...item, checked: false }));
            renderChecklist();
            closeResetModal();
        }

        // Update Counter and Progress
        function updateStats() {
            const completed = checklist.filter(item => item.checked).length;
            const total = checklist.length;
            
            document.getElementById('completedCount').innerText = completed;
            document.getElementById('totalCount').innerText = total;
            
            const percentage = total === 0 ? 0 : (completed / total) * 100;
            const progressBar = document.getElementById('progressBar');
            progressBar.style.width = `${percentage}%`;
            
            // Change progress color based on completion
            if (percentage === 100) {
                progressBar.className = "bg-green-500 h-1.5 transition-all duration-500 shadow-[0_0_15px_#22c55e]";
            } else {
                progressBar.className = "bg-blue-500 h-1.5 transition-all duration-500 shadow-[0_0_10px_#3b82f6]";
            }
        }

        // Save to LocalStorage
        function saveData() {
            localStorage.setItem('forexChecklist', JSON.stringify(checklist));
        }

        // Mindset Modal Logic (New)
        function openMindsetModal() {
            document.getElementById('mindsetModal').classList.remove('hidden');
            document.getElementById('mindsetModal').classList.add('flex');
        }

        function closeMindsetModal() {
            document.getElementById('mindsetModal').classList.add('hidden');
            document.getElementById('mindsetModal').classList.remove('flex');
        }

        // Handle Enter key in inputs
        document.getElementById('newItemInput').addEventListener('keypress', function (e) {
            if (e.key === 'Enter') addItem();
        });
        
        document.getElementById('editInput').addEventListener('keypress', function (e) {
            if (e.key === 'Enter') saveEdit();
        });

        // Close modals when clicking outside
        window.onclick = function(event) {
            const modals = ['addModal', 'editModal', 'resetModal', 'deleteModal', 'mindsetModal']; // Added mindsetModal
            modals.forEach(modalId => {
                const modal = document.getElementById(modalId);
                if (event.target === modal) {
                    modal.classList.add('hidden');
                    modal.classList.remove('flex');
                }
            });
        }

        // Initial Render
        renderChecklist();

    </script>
</body>
</html>
